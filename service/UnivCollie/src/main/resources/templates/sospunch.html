<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--><html xmlns:th="http://www.thymeleaf.org">
<html class="no-js" lang="">
	<!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>Ela Admin - HTML5 Admin Template</title>
		<meta name="description" content="Ela Admin - HTML5 Admin Template">
		<meta name="viewport" content="width=device-width, initial-scale=1">


		<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
		<link rel="stylesheet" th:href="@{/css/font-awesome.min.css}">
		<link rel="stylesheet" th:href="@{/css/themify-icons.css}">
		<link rel="stylesheet" th:href="@{/css/pe-icon-7-filled.css}">
		<link rel="stylesheet" th:href="@{/css/flag-icon.min.css}">
		<link rel="stylesheet" th:href="@{/css/style.css}">


		<link rel="stylesheet" type="text/css" th:href="@{/css/jquery.dataTables.min.css}" />
		<link rel="stylesheet" type="text/css" th:href="@{/css/buttons.dataTables.min.css}" />
		<!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/html5shiv/3.7.3/html5shiv.min.js"></script> -->
		
		

		
		

		<style>
			#weatherWidget .currentDesc {
        color: #ffffff!important;
    }
        .traffic-chart {
            min-height: 335px;
        }

		.sosnumber{
			color: white;
			margin-left: 5%;
			background-color: #d9534f;
			border-radius:50px;
		}

        #flotPie1  {
            height: 150px;
        }
        #flotPie1 td {
            padding:3px;
        }
        #flotPie1 table {
            top: 20px!important;
            right: -10px!important;
        }
        .chart-container {
            display: table;
            min-width: 270px ;
            text-align: left;
            padding-top: 10px;
            padding-bottom: 10px;
        }
        #flotLine5  {
             height: 105px;
        }

        #flotBarChart {
            height: 150px;
        }
        #cellPaiChart{
            height: 160px;
        }

    </style>
	</head>

	<body>
		<!-- Left Panel -->

		<aside id="left-panel" class="left-panel">
			<nav class="navbar navbar-expand-sm navbar-default">
				<div id="main-menu" class="main-menu collapse navbar-collapse">
					<ul class="nav navbar-nav">
						<li >
							<a href="/admin/index"><i class="menu-icon fa fa-laptop"></i>数据视图</a>
						</li>
						<li>
							<a href="/admin/sosinfor"><i class="menu-icon fa fa-laptop"></i>紧急求助<span class="sosnumber">&nbsp;0&nbsp;</span></a>
						</li>
						<li class="menu-title">用户管理</li><!-- /.menu-title -->
						<li >
							<a href="/admin/teachermanager"> <i class="menu-icon fa fa-th"></i>教师管理员</a>

						</li>
						<li class="">
							<a href="/admin/studentmanager"><i class="menu-icon fa fa-th"></i>学生安全员</a>
						</li>
						<li class="">
							<a href="/admin/student"> <i class="menu-icon fa fa-th"></i>普通学生</a>
						</li>

						<li class="menu-title">系统设置</li><!-- /.menu-title -->

						<li class="">
							<a href="/admin/triprules"> <i class="menu-icon fa fa-cogs"></i>出行规则</a>
							
						</li>
						<li class="active">
							<a href="/admin/sospunch"> <i class="menu-icon fa fa-cogs"></i>打卡应急</a>
						</li>
						
						<li class="menu-title">账户操作</li><!-- /.menu-title -->

						<li class="menu-item-has-children dropdown">
							<a href="#"></i>安全退出</a>
						</li>
					</ul>
				</div><!-- /.navbar-collapse -->
			</nav>
		</aside>
		<!-- /#left-panel -->
		<!-- Right Panel -->
		<div id="right-panel" class="right-panel">
			<!-- Header-->
			<header id="header" class="header">
				<div class="top-left">
					<div class="navbar-header">
						<a class="navbar-brand" href="./"><img th:src="@{/images/logo.png}" alt="Logo"></a>
						<a class="navbar-brand hidden" href="./"><img th:src="@{/images/logo2.png}" alt="Logo"></a>
						<a id="menuToggle" class="menutoggle"><i class="fa fa-bars"></i></a>
					</div>
				</div>
				
			</header>
			<!-- /#header -->
			<!-- Content -->
			<div class="content">
				<div class="animated fadeIn">
					<div class="row">
						<div class="col-md-12">
							<div class="card">
								<div class="card-header">
									<strong class="card-title">应急设置</strong>
								</div>
								<div class="card-body">
									<form action="/admin/updataSosrules" method="get" class="form-inline" role="form">
										<div class="form-group">
											<label>医疗应急电话</label>
											<input type="tel" id="medictel" class="form-control" name="medictel" placeholder="请输入医疗应急电话">
										</div>
										<div class="form-group">
											<label>警务应急电话</label>
											<input type="tel" id="polictel" class="form-control" name="polictel" placeholder="请输入警务应急电话">
										</div>
										<button type="submit" class="btn btn-warning">更新并通知</button>
									</form>

								</div>
							</div>
						</div>
					</div><!-- .animated -->


				<div class="row">
					<div class="col-md-12">
						<div class="card">
							<div class="card-header">
								<strong class="card-title">打卡规则</strong>
							</div>
							<div class="card-body">
								<form action="/admin/updataPunchrules" method="get" class="form-inline" role="form">
									<div class="form-group">
										<label>打卡时间-</label>
										<input type="number" id="begintime_h" class="form-control" min="0" max="23" name="begintime_h" placeholder="时">
									</div>
									<div class="form-group">
										<label>：</label>
										<input type="number" id="begintime_m" class="form-control" min="0" max="59" name="begintime_m" placeholder="分">
									</div>
									<div class="form-group">
										<label>至</label>
										<input type="number" id="overtime_h" class="form-control" min="0" max="23" name="overtime_h" placeholder="时">
									</div>
									<div class="form-group">
										<label>：</label>
										<input type="number" id="overtime_m" class="form-control" min="0" max="59"  name="overtime_m" placeholder="分">
									</div>
									<button type="submit" class="btn btn-warning">更新并通知</button>
								</form>
							</div>
						</div>

						<div class="row">
							<div class="col-md-12">
								<div class="card">
									<div class="card-header">
										<strong class="card-title">重置打卡记录</strong>
									</div>
									<div class="card-body">
											<button type="submit" class="btn btn-warning" onclick="reloadsystem()">重置系统</button>
									</div>
								</div>
							</div>
						</div>




					</div>
				</div><!-- .animated -->
			</div>
			</div>


		</div>

		
	</body>

	<script type="text/javascript" th:src="@{/js/jquery-2.1.4.min.js}"></script>
	<script type="text/javascript" th:src="@{/js/jquery.dataTables.min.js}"></script>
	<script type="text/javascript" th:src="@{/js/dataTables.buttons.min.js}"></script>
	<script type="text/javascript" th:src="@{/js/buttons.flash.min.js}"></script>
	<script type="text/javascript" th:src="@{/js/buttons.html5.min.js}"></script>

	<script>
		$(document).ready(begin());

		function begin() {
			setInterval(getSosNumber,3000);
			getInfor();
			// setInterval(reloadTable,3000);
		}



		function getSosNumber() {
			$.get("/data/sosnumber", function(data,status) {
				$(".sosnumber").html("&nbsp" +data+ "&nbsp;");
			});

		}

		function getInfor() {
			$.get("/data/getInfor", function(data,status) {
				document.getElementById("begintime_h").value=data.begintime_h;
				document.getElementById("begintime_m").value=data.begintime_m;
				document.getElementById("overtime_h").value=data.overtime_h;
				document.getElementById("overtime_m").value=data.overtime_m;
				document.getElementById("medictel").value=data.matterstel;
				document.getElementById("polictel").value=data.securitytel;
			});
		}

		function reloadsystem() {
			$.get("/data/reloadsystem", function(data,status) {
				alert("重置完成！");
			});
		}

	</script>
</html>
